```{r echo=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(knitr)
df <- read.csv("sparrow.csv")
treatments <- unique(df$Treatment)
```

# Introduction
The question we want to answer is whether the different nests attracted different size sparrows. This experiment is important because it helps us understand the impact of nesting environments on the size of sparrows. If certain nests attract larger sparrows, it could provide insights into their habitat preferences and reproductive success. This information can be valuable for conservation efforts and improving habitat management for bird populations. 

Our null hypothesis is that the different nests did not attract different size sparrows (the average size sparrow each nest attracted is around the same). Our alternate hypothesis is that at least one nest attracted a different size sparrow (the average size sparrow for at least one nest is different). To figure out whether to support or reject our null hypothesis, we can use: ??

# Summary
We will:

1. Graph a histogram of frequencies of different weights for each type of treatment to get a visual idea of what the distributions look like.
2. ??

## Histograms (Figure 1)
According to these histograms, the graphs all look approximately normal. For each graph, the majority of the bars are around the mean and form a bell-shaped curve.
```{r}

# histograms
par(mfrow = c(ceiling(length(treatments) / 2), 2))
for (i in seq_along(treatments)) {
  treatment <- treatments[i]
  hist(df$Weight[df$Treatment == treatment],
       main = paste("Sparrow Weights in", treatment, "treatment"),
       xlab = "Weight", ylab = "Frequency")
}
```

## Box plots (Figure 2)
According to our box plots, it seems like we have a couple of outliers, which we will clean up in the diagnostics section. The means also seem to differ since the box (i.e. the range between the first and third quartile) of the enlarged treatment does not overlap with the reduced treatment.
```{r}

# box plots
par(mfrow = c(1, 1))
boxplot_list <- list()
for (i in seq_along(treatments)) {
  treatment <- treatments[i]
  boxplot_list[[i]] <- df$Weight[df$Treatment == treatment]
}

boxplot(boxplot_list,
        main = "Boxplot of Sparrow Weights",
        xlab = "Treatment", ylab = "Weight",
        names = treatments)
```

## Summary values (Figure 3)
Based on our summary values, it is potentially the case that the reduced mean is different from the enlarged mean, as they are around one to two standard deviations away. Also, since the overall sample size is 116 which is greater than 30, the central limit theorem applies and the data is normally distributed.
```{r}

# summary values
summary_values <- data.frame(
  Statistic = c("Sample Mean", "Sample Standard Deviation", "Sample Size")
)

for (treatment in treatments) {
  weights <- df$Weight[df$Treatment == treatment]
  summary_values[[treatment]] <- c(mean(weights), sd(weights), length(weights))
}

weights <- df$Weight
summary_values$overall <- c(mean(weights), sd(weights), length(weights))

kable(summary_values)
```

# Diagnostics
Our assumptions for the ANOVA model is:

1. $Y_{ij}$'s were randomly sampled
2. The $i$ groups are independent
3. $E_{ij} \sim N(0, \sigma_\epsilon^2)$

The first assumption of the ANOVA model requires us to know the sampling techniques and whether or not blocking is used properly to remove bias. We need to control variables that affect the size of birds using the nest. We cannot tell if this is violated as we are not told the sampling techniques, but for simplicity, we will assume this holds.

The second assumption means that the size of birds one nest attracts do not affect the size of birds other nests attracts. One way this assumption can be violated is if the birds have a ranked preference for the nests. For example, let's say all birds prefer the enlarged over the control and the control over the reduced. Then whether a bird is attracted to the control depends on whether it is attracted to the enlarged nest. In this case, a bird will only consider the control nest under the condition that it is not attracted to the enlarged nest. We cannot tell if this is violated because we have no information about the preferences, but for simplicity, we will also assume that the birds have only one preference for nest.

Our last assumption holds due to central limit theorem (figure 3) and the fact that our data looks approximately normal (figure 1). To confirm our results, we can do a normal qqplot. ??

Our assumptions for the power test and sample size calculations is:

1. We know $\mu_i$, $\mu_\cdot$, $\sigma_\epsilon$

Our assumptions for the sample size calculations is:

1. All $n_i$ values are equal
2. We know $\sigma_\epsilon$ (we addressed this with our assumptions for the power test)

# Analysis


# Appendix
```{r ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}
```